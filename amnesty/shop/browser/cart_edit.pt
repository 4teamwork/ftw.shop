<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      lang="en-US"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="amnesty.shop">
<body>

<metal:main fill-slot="main">
<tal:main-macro metal:define-macro="main"
                tal:define="cview context/cart_view;
                            cart cview/cart_items">

    <h1 i18n:translate="cart_title">Shopping Cart</h1>
    
    <tal:block tal:define="cart_items python:cart.values()">
                           
        <p tal:condition="not:cart_items"
           i18n:translate="cart_is_empty">Your cart is empty</p>
           
        <form method="post" action="./"
              tal:condition="cart_items">
              
            <table class="cartListing" cellpadding="0" cellspacing="0">
                <thead>
                  <tr>
                    <th i18n:translate="cart_header_title">Product</th>
                    <th i18n:translate="cart_header_description">Description</th>
                    <th i18n:translate="cart_header_quantity">Quantity</th>
                    <th i18n:translate="cart_header_price">Price</th>
                    <th i18n:translate="cart_header_total">Total</th>
                    <th i18n:translate="cart_header_delete">Delete</th>
                  </tr>
                </thead>
                <tbody>
                  <metal:block tal:repeat="ctuple python:cart.items()">
                    <tr tal:define="item python:ctuple[1];
                                    uid python:ctuple[0]">
                      <td>
                        <a tal:attributes="href item/url"
                           tal:content="item/title">
                           cart item
                        </a>
                      </td>
                      <td tal:content="item/description"></td>
                      <td><input type="text" size="5"
                                 tal:attributes="value item/quantity;
                                                 name string:quantity_${uid}" /></td>
                      <td tal:content="item/price"></td>
                      <td tal:content="item/total"></td>
                      <td>
                          <a href="" tal:attributes="href python:'cart_remove?id=%s' % uid"
                                     i18n:attributes="cart_remove">
                              <img src="" tal:replace="structure here/delete_p.gif" />
                          </a>
                      </td>
                    </tr> 
                  </metal:block>
                </tbody>
              </table>
              <div><p>Total: <b tal:content="cview/cart_total">US$ 100.00</b></p></div>
              <div>
                <input class="context"
                       type="submit"
                       value="Update Cart"
                       name="cart_update:method"
                       i18n:attributes="value"
                />
                <input class="context"
                       type="submit"
                       value="Empty Shopping Cart"
                       name="cart_delete:method"
                       i18n:attributes="value"
                />
                <input class="context"
                       type="submit"
                       value="Checkout"
                       name="checkout:method"
                       i18n:attributes="value"
                />
              </div>
            </form>
        </tal:block>

</tal:main-macro>
</metal:main>
</body>
</html>
